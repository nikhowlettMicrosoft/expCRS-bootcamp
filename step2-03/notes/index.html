<!DOCTYPE html>
<html>
  <head>
    <title>EXP Bootcamp - Adding Logic</title>
    <link rel="stylesheet" href="./style.css" />

    <style>
      hr {
        margin: 40px;
      }
    </style>
  </head>

  <body>
    <section>
      <h2>Add Components</h2>
      <div>[steps to add a component]</div>
      <hr />
      <h2>Sample PR</h2>
      <div>
        <ul>
          To send & receive data in the WebJob, we will replace the RunView Method Header in Program.cs with the following:
          <li>
            <pre>public static async Task RunView(
              </pre>
            <pre>
              [ServiceBusTrigger(topicName: "xcardView", subscriptionName: "ViewCall", Connection = "ServiceBus")] ServiceBusReceivedMessage thisMessage,    
            </pre>
            <pre>
              [ServiceBus("prodcompletedscorecardids", entityType: ServiceBusEntityType.Topic, Connection = "ServiceBus")]
          </pre>
            <pre>
              IAsyncCollector<ServiceBusMessage> xCardViewClient)</pre>
          </li>
          <br />
          Then to Receive that Data, 
          <br />
          Add the following function in Program.cs and set a breakpoint inside the function
          <li>
            <pre>public async Task RunReceive(
              </pre>
              <pre>[ServiceBusTrigger(topicName: "prodcompletedscorecardids", subscriptionName: "ViewCall", Connection = "ServiceBus")] ServiceBusReceivedMessage thisMessage)
                </pre>
                <pre>{
                  </pre>
                  <pre>var receivedData = thisMessage;
                  </pre>
          <pre>}</pre>
                </li>
                <br />
                Restart your web app,
                <br />
                and re-send a message to the topic with both the trigger and client, in this case 'xcardView' 
                <br /> from the AzureServiceBusExplorer
        </ul>
        Your breakpoint should hit, 
        <br />
        Congratulations, you have made your own Web Job that sends and receives data!
        
      
    </section>
    <hr />
  </body>
</html>
